apply plugin: 'java'

sourceCompatibility = 1.8
targetCompatibility = 1.8

sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
}

dependencies {
	compile fileTree(dir: 'lib', includes: ['*.jar'])
}

task copyDependencies(type: Copy) {
	from configurations.runtime
	into 'build/libs/lib'
}

task copyXML(type: Copy) {
	from 'aa.xml'
	into 'build/libs'
}

jar.dependsOn(copyDependencies, copyXML)

jar {
	manifest {
		attributes 'Main-Class': 'com.zyk.backup.BackUpClient'
		//attributes 'Class-Path': 'lib/dom4j-1.6.1.jar lib/log4j-1.2.17.jar lib/sqljdbc41.jar lib/commons-net-3.6.jar'
		if (!configurations.runtime.isEmpty()) {
        	manifest.attributes('Class-Path': 'lib/' + configurations.runtime.collect { it.name }.join(' lib/'))
    	}
	}
	
}